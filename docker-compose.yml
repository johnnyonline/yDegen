services:
  eth-ydegen:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: eth-ydegen
    volumes:
      - .:/app
      - /app/.venv  # anonymous volume to prevent host .venv from leaking in
    working_dir: /app
    command: >
      bash -c "
      uv venv &&
      . .venv/bin/activate &&
      uv sync &&
      export $(grep -v '^#' .env | xargs) &&
      silverback run src.bot:bot --network :mainnet
      "
    restart: unless-stopped